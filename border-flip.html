<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Framed Memories Flip</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Spectral:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/bordered-gallery-flip.css">
</head>
<body>
  <div class="page-border">
    <div class="border-cell top-left"><img src="assets/images/AUG4710_bw.jpg" alt="Couple laughing together"></div>
    <div class="border-cell top-left-center"><img src="assets/images/AUG4726_bw.jpg" alt="Holding hands"></div>
    <div class="border-cell top-right-center"><img src="assets/images/AUG4738_bw.jpg" alt="Looking at each other"></div>
    <div class="border-cell top-right"><img src="assets/images/AUG4759_bw.jpg" alt="Walking through a meadow"></div>

    <div class="border-cell mid-left-upper"><img src="assets/images/AUG4849_bw.jpg" alt="Strolling through the forest"></div>
    <div class="border-cell mid-right-upper"><img src="assets/images/AUG4869_bw.jpg" alt="Dancing together"></div>

    <main class="content-card">
      <div class="card-shell">
        <div class="countdown-wrapper" aria-live="polite">
          <p class="eyebrow">Celebration Countdown</p>
          <div class="countdown-number" id="countdownNumber" role="status" aria-label="Countdown at 10">10</div>
          <p class="countdown-note">Counting down the final moments until the big day.</p>
        </div>
      </div>
    </main>

    <div class="border-cell mid-left-lower"><img src="assets/images/AUG5177_bw.jpg" alt="Sharing a quiet moment"></div>
    <div class="border-cell mid-right-lower"><img src="assets/images/AUG5201_bw.jpg" alt="Couple embracing"></div>

    <div class="border-cell bottom-left"><img src="assets/images/AUG5253_bw.jpg" alt="Walking hand in hand"></div>
    <div class="border-cell bottom-left-center"><img src="assets/images/AUG5279_bw.jpg" alt="Smiling together"></div>
    <div class="border-cell bottom-right-center"><img src="assets/images/AUG5290_bw.jpg" alt="Dancing under string lights"></div>
    <div class="border-cell bottom-right"><img src="assets/images/AUG5306_bw.jpg" alt="Laughing near the lake"></div>
  </div>

  <script>
    const borderCells = Array.from(document.querySelectorAll('.border-cell'));
    borderCells.forEach((cell, index) => {
      cell.style.setProperty('--border-cell-delay', `${index * 0.35}s`);
    });

    requestAnimationFrame(() => {
      borderCells.forEach((cell) => {
        cell.classList.add('is-ready');
      });
    });

    const countdownWrapper = document.querySelector('.countdown-wrapper');
    const cardShell = countdownWrapper ? countdownWrapper.closest('.card-shell') : null;
    const countdownNumber = document.getElementById('countdownNumber');
    const countdownStart = 10;
    const countdownNote = document.querySelector('.countdown-note');
    let currentValue = countdownStart;

    const showCelebrationVideo = () => {
      if (!countdownWrapper) {
        return;
      }

      countdownWrapper.classList.add('has-video');
      countdownWrapper.innerHTML = '';

      const videoFrame = document.createElement('div');
      videoFrame.className = 'countdown-video-frame';

      const celebrationVideo = document.createElement('video');
      celebrationVideo.className = 'countdown-video';
      celebrationVideo.src = 'assets/video.mp4';
      celebrationVideo.autoplay = true;
      celebrationVideo.loop = true;
      celebrationVideo.muted = true;
      celebrationVideo.setAttribute('playsinline', '');

      videoFrame.appendChild(celebrationVideo);
      countdownWrapper.appendChild(videoFrame);

      if (cardShell) {
        cardShell.classList.add('is-video');
      }
    };

    if (countdownNumber) {
      countdownNumber.textContent = String(currentValue);

      const countdownInterval = window.setInterval(() => {
        currentValue -= 1;
        countdownNumber.classList.add('is-transitioning');

        if (currentValue <= 0) {
          countdownNumber.textContent = '0';
          countdownNumber.setAttribute('aria-label', 'Countdown finished');
          window.clearInterval(countdownInterval);
          if (countdownNote) {
            countdownNote.textContent = 'It\'s time to celebrate!';
          }
          window.setTimeout(() => {
            showCelebrationVideo();
          }, 400);
        } else {
          countdownNumber.textContent = String(currentValue);
          countdownNumber.setAttribute('aria-label', `Countdown at ${currentValue}`);
        }

        window.setTimeout(() => {
          countdownNumber.classList.remove('is-transitioning');
        }, 200);
      }, 1000);
    }
  </script>
</body>
</html>
